<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Waste Collection Schedule - Smart Waste Management System</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <header>
      <h1>Waste Collection Schedule</h1>
    </header>
    <nav>
      <button class="nav-toggle" aria-label="Toggle navigation">
        <span class="hamburger"></span>
      </button>
      <ul class="nav-menu">
        <li><a href="{{ url_for('main.index') }}">Home</a></li>
        <li>
          <a href="{{ url_for('user.schedule') }}">Waste Collection Schedule</a>
        </li>
        <li><a>Recycling Tracker</a></li>
        <li><a>Admin Dashboard</a></li>
        <li><a href="{{ url_for('auth.register') }}">Register</a></li>
        <li><a href="{{ url_for('auth.login') }}">Login</a></li>
      </ul>
    </nav>
    <main>
      <section id="schedule-dashboard">
        <h2>Schedule Your Waste Collection</h2>
        <form
          id="schedule-form"
          method="post"
          action="{{ url_for('user.schedule') }}"
        >
          {{ form.hidden_tag() }}
          <div>{{ form.day_of_week.label }} {{ form.day_of_week() }}</div>
          <button type="submit">{{ form.submit.label }}</button>
        </form>

        <form method="post" action="{{ url_for('user.generate_collections') }}">
          {{ generate_form.hidden_tag() }}
          <button type="submit">{{ generate_form.submit.label }}</button>
        </form>

        <h2>Your Scheduled Collections</h2>
        <table id="schedule-table">
          <thead>
            <tr>
              <th>Day of the Week</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for schedule in schedules %}
            <tr>
              <td>{{ schedule.day_of_week }}</td>
              <td>
                <a
                  href="{{ url_for('user.edit_schedule', schedule_id=schedule.id) }}"
                  >Edit</a
                >
                |
                <a
                  href="{{ url_for('user.delete_schedule', schedule_id=schedule.id) }}"
                  >Delete</a
                >
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>

        <h2>Upcoming Collections</h2>
        <table id="upcoming-collections-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for collection in upcoming_collections %}
            <tr>
              <td>{{ collection.collection_date }}</td>
              <td>{{ collection.status }}</td>
              <td>
                <form
                  method="post"
                  action="{{ url_for('user.delete_collection', collection_id=collection.id) }}"
                  style="display: inline"
                >
                  <button
                    type="submit"
                    onclick="return confirm('Are you sure?');"
                  >
                    Delete
                  </button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
    </main>
    <footer>&copy; 2024 Smart Waste Management System</footer>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
